{"version":3,"file":"component---src-pages-tools-runsheet-timer-jsx-68fa33f5f1764a63123b.js","mappings":"wIAEIA,EAAyB,EAAQ,OAIrCC,EAAQ,OAAU,EAClB,IAAIC,EAAiBF,EAAuB,EAAQ,QAChDG,EAAc,EAAQ,OACtBC,GAAW,EAAIF,EAAeG,UAAuB,EAAIF,EAAYG,KAAK,OAAQ,CACpFC,EAAG,mPACD,iBACJN,EAAQ,EAAUG,C,+JCVdI,EAAY,CAAC,YAAa,a,eCE1BC,EDKW,WACb,IAAIC,EAAUC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAK,CAAC,EAC/EG,EAAeJ,EAAQI,aACzBC,EAAwBL,EAAQM,iBAChCA,OAA6C,IAA1BD,EAAmC,cAAgBA,EACtEE,EAAoBP,EAAQO,kBAC1BC,GAAU,QAAO,MAAO,CAC1BC,kBAAmB,SAA2BC,GAC5C,MAAgB,UAATA,GAA6B,OAATA,GAA0B,OAATA,CAC9C,GAHY,CAIXC,EAAA,GAeH,OAduB,cAAiB,SAAaC,EAASC,GAC5D,IAAIC,GAAQ,EAAAC,EAAA,GAASX,GACjBY,GAAgB,EAAAC,EAAA,GAAaL,GAC/BM,EAAYF,EAAcE,UAC1BC,EAAwBH,EAAcI,UACtCA,OAAsC,IAA1BD,EAAmC,MAAQA,EACvDE,GAAQ,OAA8BL,EAAelB,GACvD,OAAoB,SAAKU,GAAS,OAAS,CACzCc,GAAIF,EACJP,IAAKA,EACLK,WAAW,OAAKA,EAAWX,EAAoBA,EAAkBD,GAAoBA,GACrFQ,MAAOA,GACNO,GACL,GAEF,CC/BUE,CAAU,CAClBnB,cAFiB,E,SAAA,KAGjBE,iBAAkB,cAClBC,kBAAmBiB,EAAA,aAGrB,G,uRCJMC,GAASC,EAAAA,EAAAA,IAAO,MAAPA,CAAaC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,kNAWtBC,GAAMH,EAAAA,EAAAA,IAAO,MAAPA,CAAaI,IAAAA,GAAAF,EAAAA,EAAAA,GAAA,2NACH,SAACG,GAAK,OAAKA,EAAMC,OAAS,SAAS,IAC9C,SAACD,GAAK,OAAKA,EAAME,MAAQ,CAAC,IAElB,SAACF,GAAK,OACrBA,EAAME,MAAQ,IAAM,OAAS,mBAAmB,IAO9CC,GAASR,EAAAA,EAAAA,IAAOS,EAAAA,EAAPT,CAAkBU,IAAAA,GAAAR,EAAAA,EAAAA,GAAA,yEAM3BS,GAAcX,EAAAA,EAAAA,IAAOS,EAAAA,EAAPT,CAAkBY,IAAAA,GAAAV,EAAAA,EAAAA,GAAA,uFAMnBF,EAAAA,EAAAA,IAAOS,EAAAA,EAAPT,CAAkBa,IAAAA,GAAAX,EAAAA,EAAAA,GAAA,qFAkCrC,I,QAAA,EA3BA,SAAmBY,GAAkC,IAA/BC,EAAGD,EAAHC,IAAKC,EAAGF,EAAHE,IAAKC,EAAOH,EAAPG,QAASC,EAAOJ,EAAPI,QACjC9B,GAAQC,EAAAA,EAAAA,KACd0B,EAAMI,KAAKH,IAAID,EAAK,GAGpB,IAAMK,OACQ3C,KAHdwC,EAAUE,KAAKH,IAAIC,EAAS,UAGWxC,IAAZyC,EACrBH,EAAMC,EACJC,EACAC,EACFC,KAAKE,IAAIN,EAAKC,GAEdM,EAAWJ,GAAoBF,EAErC,OACEO,EAAAA,cAACxB,EAAM,CAACyB,MAAUJ,EAAQ,IAAIE,EAAQ,QACpCC,EAAAA,cAACpB,EAAG,CAACG,MAAOlB,EAAMqC,QAAQC,QAAQC,KAAMpB,KAAOQ,EAAMC,EAAO,KAC1DO,EAAAA,cAACf,EAAM,CAACoB,QAAQ,QAAQtB,MAAM,SAC3Bc,IAILG,EAAAA,cAACZ,EAAW,CAACiB,QAAQ,SAASN,GAGpC,ECvDMO,EAAW,SAACC,GAAC,OAAKA,EAAEC,QAAO,SAACC,EAAKC,GAAC,OAAKD,EAAMC,EAAEC,IAAI,GAAE,EAAG,EAOxDC,GAAiBnC,EAAAA,EAAAA,IAAO,MAAPA,CAAaC,IAAAA,GAAAC,EAAAA,EAAAA,GAAA,+EAM9BkC,GAAgBpC,EAAAA,EAAAA,IAAO,MAAPA,CAAaI,IAAAA,GAAAF,EAAAA,EAAAA,GAAA,6BAI7BmC,GAAoBrC,EAAAA,EAAAA,IAAO,MAAPA,CAAaU,IAAAA,GAAAR,EAAAA,EAAAA,GAAA,+BAIjCoC,GAAetC,EAAAA,EAAAA,IAAOuC,EAAAA,EAAPvC,CAAcY,IAAAA,GAAAV,EAAAA,EAAAA,GAAA,8BA4SnC,MAxSA,WACE,IA4IwBsC,EACAC,EAGAC,EACAC,EAEAC,EAIAC,EAtJxB/B,EADgBS,EAAAA,WAAiBuB,EAAAA,IACa,CAE5CC,UAAW,WAAO,EAClBC,YAAa,WAAO,GAHdD,EAASjC,EAATiC,UAKRE,GAL8BnC,EAAXkC,YAKezB,EAAAA,SAAe,OAA1C2B,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAC9BG,EAA8B7B,EAAAA,SAAe8B,OAAtCC,EAAOF,EAAA,GAAEG,EAAUH,EAAA,GAC1BI,EAA0BjC,EAAAA,SAAe,IAAlCkC,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACtBG,EAAgCpC,EAAAA,SAAe,IAAxCqC,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAoE5B,OAjCApC,EAAAA,WAAgB,WACd,IAAMuC,EAAQC,aAAY,kBAAMR,EAAWF,MAAS,GAAE,KACtD,OAAO,kBAAMW,cAAcF,EAAO,CACpC,GAAG,IAGHvC,EAAAA,WAAgB,WACd,IAAM0C,EAAaC,aAAaC,QAAQ,oCAClCC,EAAgBF,aAAaC,QACjC,uCAEIE,EAAiBH,aAAaC,QAClC,oCAEEF,GACFP,EAASY,KAAKC,MAAMN,IAEFd,EAAhBkB,EAA6BhB,IAAOgB,GACtBhB,OAEde,GAAeP,EAAYO,EACjC,GAAG,IAGH7C,EAAAA,WAAgB,WACV2B,GACFgB,aAAaM,QACX,mCACAtB,EAAUuB,SAGhB,GAAG,CAACvB,IAGF3B,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAACmD,EAAAA,EAAM,KACLnD,EAAAA,cAAA,aAAO,0CACPA,EAAAA,cAAA,QAAMoD,KAAK,cAAcC,QAAQ,oBAEnCrD,EAAAA,cAACsD,EAAAA,EAAS,CAACC,SAAS,MAClBvD,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,MAAK,kBACzBL,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,QAAQmD,cAAY,GAAC,6BAGxC7B,GACC3B,EAAAA,cAACY,EAAc,KACbZ,EAAAA,cAAClD,EAAAA,EAAG,CACF2G,GAAI,CACFC,QAAS,OACTC,cAAe,MACfC,eAAgB,kBAGlB5D,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,SAClBL,EAAAA,cAAA,cAAQ,WACP2B,EAAUuB,OAAO,iCAEpBlD,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,SAClBL,EAAAA,cAAA,cAAQ,SACP8B,IAAOH,GACLkC,IAAIvD,EAAS4B,GAAQ,KACrBgB,OAAO,kCAIdlD,EAAAA,cAAA,WACGkC,EAAM4B,KAAI,SAACpD,EAAGqD,GAAC,OACd/D,EAAAA,cAACa,EAAa,CAACmD,IAAKtD,EAAET,MAAQ8D,GAC3BrD,EAAET,MACHD,EAAAA,cAACiE,EAAU,CACTzE,IAAKuC,EAAQmC,KACXpC,IAAOH,GAAWkC,IAAIvD,EAAS4B,EAAMiC,MAAM,EAAGJ,IAAK,KACnD,WAEFtE,IAAc,GAATiB,EAAEC,KACPjB,QAASqC,EAAQmC,KACfpC,IAAOH,GAAWkC,IAAIvD,EAAS4B,EAAMiC,MAAM,EAAGJ,IAAK,KACnD,WAEFpE,SAnJC/C,EAmJoB8D,EAAEC,KAnJnByD,EAmJyB,EAlJ3CA,GAAU,EAAUxE,KAAKyE,MAAMzH,GACvBgD,KAAKyE,MAAMzH,EAAIgD,KAAK0E,IAAI,GAAIF,IAAWxE,KAAK0E,IAAI,GAAIF,OAF9C,IAACxH,EAAGwH,CAqJQ,MAMxBpE,EAAAA,cAAClD,EAAAA,EAAG,CAAC2G,GAAI,CAAEc,OAAQ,WACjBvE,EAAAA,cAACwE,EAAAA,EAAS,CAACvE,MAAM,WAAWwE,QAAM,GAChCzE,EAAAA,cAACc,EAAiB,KACf,IACAa,GACC3B,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,QAAQmD,cAAY,GACtCxD,EAAAA,cAAA,cAAQ,mBAGAiB,EAAUa,IAAOH,GAAWkC,IAAIvD,EAAS4B,GAAQ,KACjDhB,EAAgBY,IAAAA,SACpBb,EAAQiD,KAAKvC,IAETR,EAAauD,SAASxD,EAAcyD,WACpCvD,EACJsD,SAASxD,EAAc0D,aAAe,GAClCvD,EACJqD,SAASxD,EAAc2D,aAAe,GAGlCvD,EAAcQ,IAAAA,SAClBA,IAAAA,IAAWC,EAASd,GAASiD,KAAKvC,IAEnB+C,SAASpD,EAAYqD,WAGpB,KAFCD,SAASpD,EAAYsD,aAAe,GAEtB,KADdF,SAASpD,EAAYuD,aAAe,GACP,QAAQ1D,EAAU,KAAKC,EAAY,KAAKC,EAAY,MAI1GrB,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,SAAQ,kBAC5BL,EAAAA,cAAA,WACEA,EAAAA,cAAC8E,EAAAA,EAAM,CACL7E,MAAM,QACN8E,KAAK,QACLC,MAAOrD,EAAYA,EAAUsD,OAAS,EACtCC,SAAU,SAACxE,GAAC,OACVkB,GAAa,SAACuD,GAAE,OACdA,EACIrD,IAAOqD,GAAIF,KAAKvE,EAAE0E,OAAOJ,OACzBlD,MAASmD,KAAKvE,EAAE0E,OAAOJ,MAAM,GAClC,EAEHK,UAAW,CAAE5B,GAAI,CAAE6B,OAAQ,YAE1BC,EAAAA,EAAAA,GAAIC,MAAM,KAAK1B,KAAI,SAAC2B,EAAG1B,GAAC,OACvB/D,EAAAA,cAAC0F,EAAAA,EAAQ,CAACV,MAAOjB,EAAGC,IAAKD,GACtBA,EAAI,GAAE,IAAOA,EAAMA,EACX,KAEL,IAAI,IACZ,IACF/D,EAAAA,cAAC8E,EAAAA,EAAM,CACL7E,MAAM,UACN8E,KAAK,QACLC,MAAOrD,EAAYA,EAAUgE,SAAW,EACxCT,SAAU,SAACxE,GAAC,OACVkB,GAAa,SAACuD,GAAE,OACdA,EACIrD,IAAOqD,GAAIQ,OAAOjF,EAAE0E,OAAOJ,OAC3BlD,MAAS6D,OAAOjF,EAAE0E,OAAOJ,MAAM,GACpC,EAEHK,UAAW,CAAE5B,GAAI,CAAE6B,OAAQ,YAE1BC,EAAAA,EAAAA,GAAIC,MAAM,KAAK1B,KAAI,SAAC2B,EAAG1B,GAAC,OACvB/D,EAAAA,cAAC0F,EAAAA,EAAQ,CAACV,MAAOjB,EAAGC,IAAKD,GACtBA,EAAI,GAAE,IAAOA,EAAMA,EACX,KAEL,IAAI,IACZ,IACF/D,EAAAA,cAAC8E,EAAAA,EAAM,CACL7E,MAAM,UACN8E,KAAK,QACLC,MAAOrD,EAAYA,EAAUiE,SAAW,EACxCV,SAAU,SAACxE,GAAC,OACVkB,GAAa,SAACuD,GAAE,OACdA,EACIrD,IAAOqD,GAAIS,OAAOlF,EAAE0E,OAAOJ,OAC3BlD,MAAS8D,OAAOlF,EAAE0E,OAAOJ,MAAM,GACpC,EAEHK,UAAW,CAAE5B,GAAI,CAAE6B,OAAQ,UAC3B7B,GAAI,CAAEoC,YAAa,SAElBN,EAAAA,EAAAA,GAAIC,MAAM,KAAK1B,KAAI,SAAC2B,EAAG1B,GAAC,OACvB/D,EAAAA,cAAC0F,EAAAA,EAAQ,CAACV,MAAOjB,EAAGC,IAAKD,GACtBA,EAAI,GAAE,IAAOA,EAAMA,EACX,KAGf/D,EAAAA,cAACe,EAAY,CACXV,QAAQ,YACRyF,eAAa,EACb7F,MAAM,mBACN8F,QAAS,kBAAMnE,EAAaE,MAAS,GACtC,OAGD9B,EAAAA,cAACe,EAAY,CACXV,QAAQ,YACRyF,eAAa,EACb7F,MAAM,6BACN8F,QAAS,kBACPnE,GAAa,SAACuD,GAAE,OACdA,EACIrD,IAAOqD,GAAIa,SAAS,EAAG,KACvBlE,MAASkE,SAAS,EAAG,IAAI,GAC9B,GAEJ,SAGDhG,EAAAA,cAACe,EAAY,CACXV,QAAQ,YACRyF,eAAa,EACb7F,MAAM,4BACN8F,QAAS,kBACPnE,GAAa,SAACuD,GAAE,OACdA,EAAKrD,IAAOqD,GAAItB,IAAI,EAAG,KAAO/B,MAAS+B,IAAI,EAAG,IAAI,GACnD,GAEJ,WAKL7D,EAAAA,cAACc,EAAiB,KAChBd,EAAAA,cAACd,EAAAA,EAAU,CAACmB,QAAQ,SAAQ,SAC5BL,EAAAA,cAACiG,EAAAA,EAAS,CACRC,WAAW,oDAEXjG,MAAM,oDACNkG,KAAM,GACNC,WAAS,EACT7B,OAAO,QACPQ,KAAK,QACLsB,WAAS,EACThG,QAAQ,WACRiG,WAAY,CACVC,MAAO,CACLC,WAAY,gBAGhBxB,MAAO3C,EACP6C,SAAU,SAACxE,GAAC,OAAK4B,EAAY5B,EAAE0E,OAAOJ,MAAM,IAE9ChF,EAAAA,cAACgB,EAAAA,EAAM,CACLX,QAAQ,YACRyF,eAAa,EACb7F,MAAM,MACN8F,QAhRK,SAACrF,GAClBA,EAAE+F,iBACF,IAAMC,EAAUrE,EACbsE,OACAC,MAAM,YACN9C,KAAI,SAACpD,GAAC,OAAKA,EAAEmG,MAAM,iCAAiC,IAGjDC,EAAWJ,EACdK,QAAO,SAACrG,GAAC,OAAKA,CAAC,IACfoD,KAAI,SAACpD,GAAC,MAAM,CAAET,MAAOS,EAAE,GAAGiG,OAAQhG,KAAMqG,WAAWtG,EAAE,IAAK,IAC7DyB,EAAS2E,GAGT,IAAMG,EAAcP,EACjB5C,KAAI,SAAC2B,EAAG1B,GAAC,OAAKA,CAAC,IACfgD,QAAO,SAAChD,GAAC,OAAoB,OAAf2C,EAAQ3C,EAAW,IAChCkD,EAAYhK,OAAS,GACvBuE,EAAU,gCACwByF,EAC7BnD,KAAI,SAACC,GAAC,OAAKA,EAAI,CAAC,IAChBmD,KAAK,MAIZvE,aAAaM,QACX,mCACAF,KAAKoE,UAAUL,IAEjBnE,aAAaM,QAAQ,sCAAuCZ,EAC9D,GAoPcrC,EAAAA,cAACoH,EAAAA,EAAiB,WAQlC,C","sources":["webpack://dustbringer.github.io/./node_modules/@mui/icons-material/DirectionsRun.js","webpack://dustbringer.github.io/./node_modules/@mui/system/esm/createBox.js","webpack://dustbringer.github.io/./node_modules/@mui/material/Box/Box.js","webpack://dustbringer.github.io/./src/components/LoadingBar.jsx","webpack://dustbringer.github.io/./src/pages/tools/runsheet-timer.jsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z\"\n}), 'DirectionsRun');\nexports.default = _default;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nvar _excluded = [\"className\", \"component\"];\nimport * as React from 'react';\nimport clsx from 'clsx';\nimport styled from '@mui/styled-engine';\nimport styleFunctionSx, { extendSxProp } from './styleFunctionSx';\nimport useTheme from './useTheme';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function createBox() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaultTheme = options.defaultTheme,\n    _options$defaultClass = options.defaultClassName,\n    defaultClassName = _options$defaultClass === void 0 ? 'MuiBox-root' : _options$defaultClass,\n    generateClassName = options.generateClassName;\n  var BoxRoot = styled('div', {\n    shouldForwardProp: function shouldForwardProp(prop) {\n      return prop !== 'theme' && prop !== 'sx' && prop !== 'as';\n    }\n  })(styleFunctionSx);\n  var Box = /*#__PURE__*/React.forwardRef(function Box(inProps, ref) {\n    var theme = useTheme(defaultTheme);\n    var _extendSxProp = extendSxProp(inProps),\n      className = _extendSxProp.className,\n      _extendSxProp$compone = _extendSxProp.component,\n      component = _extendSxProp$compone === void 0 ? 'div' : _extendSxProp$compone,\n      other = _objectWithoutPropertiesLoose(_extendSxProp, _excluded);\n    return /*#__PURE__*/_jsx(BoxRoot, _extends({\n      as: component,\n      ref: ref,\n      className: clsx(className, generateClassName ? generateClassName(defaultClassName) : defaultClassName),\n      theme: theme\n    }, other));\n  });\n  return Box;\n}","import { createBox } from '@mui/system';\nimport { unstable_ClassNameGenerator as ClassNameGenerator } from '../className';\nimport { createTheme } from '../styles';\nvar defaultTheme = createTheme();\nvar Box = createBox({\n  defaultTheme: defaultTheme,\n  defaultClassName: 'MuiBox-root',\n  generateClassName: ClassNameGenerator.generate\n});\nprocess.env.NODE_ENV !== \"production\" ? void 0 : void 0;\nexport default Box;","import React from \"react\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport Typography from \"@mui/material/Typography\";\r\n\r\nimport { useTheme } from \"@mui/material/styles\";\r\n\r\nconst Border = styled(\"div\")`\r\n  outline: 2.5px solid darkgrey;\r\n  border-radius: 100px;\r\n  height: 1rem;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: relative;\r\n`;\r\n\r\nconst Bar = styled(\"div\")`\r\n  background-color: ${(props) => props.color || \"skyblue\"};\r\n  width: ${(props) => props.fill || 0}%;\r\n  height: 1rem;\r\n  border-radius: ${(props) =>\r\n    props.fill >= 100 ? \"10px\" : \"10px 4px 4px 10px\"};\r\n  display: flex;\r\n  align-items: center;\r\n  transition: all 1s linear;\r\n  overflow: hidden; // hides number inside when short\r\n`;\r\n\r\nconst Number = styled(Typography)`\r\n  font-weight: bold;\r\n  margin-left: auto;\r\n  padding: 0 4px;\r\n`;\r\n\r\nconst NumberRight = styled(Typography)`\r\n  font-weight: bold;\r\n  position: absolute;\r\n  right: 4px;\r\n  z-index: -1;\r\n`;\r\nconst NumberLeft = styled(Typography)`\r\n  font-weight: bold;\r\n  position: absolute;\r\n  left: 4px;\r\n  z-index: -1;\r\n`;\r\n\r\nfunction LoadingBar({ cur, max, dispCur, dispMax }) {\r\n  const theme = useTheme();\r\n  cur = Math.max(cur, 0); // ignore negative cur\r\n  dispCur = Math.max(dispCur, 0);\r\n\r\n  const shownCur =\r\n    dispCur !== undefined && dispMax !== undefined\r\n      ? cur < max // show dispCur/dispMax depending on finer details in cur and max (seconds)\r\n        ? dispCur\r\n        : dispMax\r\n      : Math.min(cur, max);\r\n\r\n  const shownMax = dispMax ? dispMax : max;\r\n\r\n  return (\r\n    <Border title={`${shownCur}/${shownMax} min`}>\r\n      <Bar color={theme.palette.primary.main} fill={(cur / max) * 100}>\r\n        <Number variant=\"body2\" color=\"black\">\r\n          {shownCur}\r\n        </Number>\r\n      </Bar>\r\n\r\n      <NumberRight variant=\"body2\">{shownMax}</NumberRight>\r\n    </Border>\r\n  );\r\n}\r\n\r\nexport default LoadingBar;\r\n","import React from \"react\";\r\nimport { styled } from \"@mui/material/styles\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport moment from \"moment\";\r\n\r\nimport Box from \"@mui/material/Box\";\r\nimport Button from \"@mui/material/Button\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport DirectionsRunIcon from \"@mui/icons-material/DirectionsRun\";\r\n\r\nimport Accordion from \"../../components/Accordion\";\r\nimport Container from \"../../components/Container\";\r\nimport { GlobalContext } from \"../../context/GlobalContext\";\r\nimport LoadingBar from \"../../components/LoadingBar\";\r\n\r\nconst sumTasks = (a) => a.reduce((acc, e) => acc + e.time, 0);\r\n\r\nconst trimDecimal = (d, places) => {\r\n  if (places <= 0) return Math.floor(d);\r\n  else return Math.floor(d * Math.pow(10, places)) / Math.pow(10, places);\r\n};\r\n\r\nconst TimerContainer = styled(\"div\")`\r\n  outline: 1px solid grey;\r\n  border-radius: 3px;\r\n  padding: 15px;\r\n`;\r\n\r\nconst TaskContainer = styled(\"div\")`\r\n  margin: 10px 0;\r\n`;\r\n\r\nconst SettingsContainer = styled(\"div\")`\r\n  margin: 0 0 10px;\r\n`;\r\n\r\nconst ButtonSpaced = styled(Button)`\r\n  margin: 3px 3px;\r\n`;\r\n\r\nfunction TimerPage() {\r\n  const context = React.useContext(GlobalContext);\r\n  const { showError, showSuccess } = context || {\r\n    // Default values if context is null\r\n    showError: () => {},\r\n    showSuccess: () => {},\r\n  };\r\n  const [startTime, setStartTime] = React.useState(null);\r\n  const [curTime, setCurTime] = React.useState(moment());\r\n  const [tasks, setTasks] = React.useState([]);\r\n  const [settings, setSettings] = React.useState(\"\");\r\n\r\n  const onSetTasks = (e) => {\r\n    e.preventDefault();\r\n    const matches = settings\r\n      .trim()\r\n      .split(/\\s*\\n\\s*/)\r\n      .map((e) => e.match(/^\\s*(\\d*\\.\\d+|\\d+\\.?)\\s*,(.*)$/)); // get number,title\r\n    // note: can say \\s because these are individual lines (no worry about new lines)\r\n\r\n    const newTasks = matches\r\n      .filter((e) => e) // remove non-matches\r\n      .map((e) => ({ title: e[2].trim(), time: parseFloat(e[1]) })); // get number,title;\r\n    setTasks(newTasks);\r\n\r\n    // Failed lines\r\n    const failedParse = matches\r\n      .map((_, i) => i)\r\n      .filter((i) => matches[i] === null);\r\n    if (failedParse.length > 0) {\r\n      showError(\r\n        `Error: Invalid time in lines ${failedParse\r\n          .map((i) => i + 1)\r\n          .join(\",\")}`\r\n      );\r\n    }\r\n\r\n    localStorage.setItem(\r\n      \"dustbringer-runsheet-timer-tasks\",\r\n      JSON.stringify(newTasks)\r\n    );\r\n    localStorage.setItem(\"dustbringer-runsheet-timer-settings\", settings);\r\n  };\r\n\r\n  // Timer tick\r\n  React.useEffect(() => {\r\n    const timer = setInterval(() => setCurTime(moment()), 1000);\r\n    return () => clearInterval(timer);\r\n  }, []);\r\n\r\n  // Load any saved file contents\r\n  React.useEffect(() => {\r\n    const savedTasks = localStorage.getItem(\"dustbringer-runsheet-timer-tasks\");\r\n    const savedSettings = localStorage.getItem(\r\n      \"dustbringer-runsheet-timer-settings\"\r\n    );\r\n    const savedStartTime = localStorage.getItem(\r\n      \"dustbringer-runsheet-timer-start\"\r\n    );\r\n    if (savedTasks) {\r\n      setTasks(JSON.parse(savedTasks));\r\n    }\r\n    if (savedStartTime) setStartTime(moment(savedStartTime));\r\n    else setStartTime(moment());\r\n\r\n    if (savedSettings) setSettings(savedSettings);\r\n  }, []);\r\n\r\n  // update starttime if changed\r\n  React.useEffect(() => {\r\n    if (startTime) {\r\n      localStorage.setItem(\r\n        \"dustbringer-runsheet-timer-start\",\r\n        startTime.format()\r\n      );\r\n    }\r\n  }, [startTime]);\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Runsheet Timer | dustbringer.github.io</title>\r\n        <meta name=\"description\" content=\"Runsheet Timer\" />\r\n      </Helmet>\r\n      <Container maxWidth=\"md\">\r\n        <Typography variant=\"h4\">Runsheet Timer</Typography>\r\n        <Typography variant=\"body1\" gutterBottom>\r\n          Keep track of a schedule.\r\n        </Typography>\r\n        {startTime && (\r\n          <TimerContainer>\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                flexDirection: \"row\",\r\n                justifyContent: \"space-between\",\r\n              }}\r\n            >\r\n              <Typography variant=\"body1\">\r\n                <strong>Start: </strong>\r\n                {startTime.format(\"HH:mm:ss, dddd, DD MMMM YYYY\")}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>End: </strong>\r\n                {moment(startTime)\r\n                  .add(sumTasks(tasks), \"m\")\r\n                  .format(\"HH:mm:ss, dddd, DD MMMM YYYY\")}\r\n              </Typography>\r\n            </Box>\r\n\r\n            <div>\r\n              {tasks.map((e, i) => (\r\n                <TaskContainer key={e.title + i}>\r\n                  {e.title}\r\n                  <LoadingBar\r\n                    cur={curTime.diff(\r\n                      moment(startTime).add(sumTasks(tasks.slice(0, i)), \"m\"),\r\n                      \"seconds\"\r\n                    )}\r\n                    max={e.time * 60}\r\n                    dispCur={curTime.diff(\r\n                      moment(startTime).add(sumTasks(tasks.slice(0, i)), \"m\"),\r\n                      \"minutes\"\r\n                    )}\r\n                    dispMax={trimDecimal(e.time, 2)}\r\n                  />\r\n                </TaskContainer>\r\n              ))}\r\n            </div>\r\n          </TimerContainer>\r\n        )}\r\n\r\n        <Box sx={{ margin: \"10px 0\" }}>\r\n          <Accordion title=\"Settings\" expand>\r\n            <SettingsContainer>\r\n              {\" \"}\r\n              {startTime && (\r\n                <Typography variant=\"body1\" gutterBottom>\r\n                  <strong>Time Elapsed: </strong>\r\n                  {(() => {\r\n                    // total time for the tasks listed\r\n                    const endTime = moment(startTime).add(sumTasks(tasks), \"m\");\r\n                    const totalDuration = moment.duration(\r\n                      endTime.diff(startTime)\r\n                    );\r\n                    const totalHours = parseInt(totalDuration.asHours());\r\n                    const totalMinutes =\r\n                      parseInt(totalDuration.asMinutes()) % 60;\r\n                    const totalSeconds =\r\n                      parseInt(totalDuration.asSeconds()) % 60;\r\n\r\n                    // current should be at most the total time\r\n                    const curDuration = moment.duration(\r\n                      moment.min(curTime, endTime).diff(startTime)\r\n                    );\r\n                    const curHours = parseInt(curDuration.asHours());\r\n                    const curMinutes = parseInt(curDuration.asMinutes()) % 60;\r\n                    const curSeconds = parseInt(curDuration.asSeconds()) % 60;\r\n                    return `${curHours}h ${curMinutes}m ${curSeconds}s of ${totalHours}h ${totalMinutes}m ${totalSeconds}s`;\r\n                  })()}\r\n                </Typography>\r\n              )}\r\n              <Typography variant=\"body1\">Set Start Time</Typography>\r\n              <div>\r\n                <Select\r\n                  title=\"Hours\"\r\n                  size=\"small\"\r\n                  value={startTime ? startTime.hour() : 0}\r\n                  onChange={(e) =>\r\n                    setStartTime((st) =>\r\n                      st\r\n                        ? moment(st).hour(e.target.value)\r\n                        : moment().hour(e.target.value)\r\n                    )\r\n                  }\r\n                  MenuProps={{ sx: { height: \"400px\" } }}\r\n                >\r\n                  {[...Array(24)].map((_, i) => (\r\n                    <MenuItem value={i} key={i}>\r\n                      {i < 10 ? `0${i}` : i}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>{\" \"}\r\n                :{\" \"}\r\n                <Select\r\n                  title=\"Minutes\"\r\n                  size=\"small\"\r\n                  value={startTime ? startTime.minute() : 0}\r\n                  onChange={(e) =>\r\n                    setStartTime((st) =>\r\n                      st\r\n                        ? moment(st).minute(e.target.value)\r\n                        : moment().minute(e.target.value)\r\n                    )\r\n                  }\r\n                  MenuProps={{ sx: { height: \"400px\" } }}\r\n                >\r\n                  {[...Array(60)].map((_, i) => (\r\n                    <MenuItem value={i} key={i}>\r\n                      {i < 10 ? `0${i}` : i}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>{\" \"}\r\n                :{\" \"}\r\n                <Select\r\n                  title=\"Seconds\"\r\n                  size=\"small\"\r\n                  value={startTime ? startTime.second() : 0}\r\n                  onChange={(e) =>\r\n                    setStartTime((st) =>\r\n                      st\r\n                        ? moment(st).second(e.target.value)\r\n                        : moment().second(e.target.value)\r\n                    )\r\n                  }\r\n                  MenuProps={{ sx: { height: \"400px\" } }}\r\n                  sx={{ marginRight: \"3px\" }}\r\n                >\r\n                  {[...Array(60)].map((_, i) => (\r\n                    <MenuItem value={i} key={i}>\r\n                      {i < 10 ? `0${i}` : i}\r\n                    </MenuItem>\r\n                  ))}\r\n                </Select>\r\n                <ButtonSpaced\r\n                  variant=\"contained\"\r\n                  disableRipple\r\n                  title=\"Set start to now\"\r\n                  onClick={() => setStartTime(moment())}\r\n                >\r\n                  Now\r\n                </ButtonSpaced>\r\n                <ButtonSpaced\r\n                  variant=\"contained\"\r\n                  disableRipple\r\n                  title=\"Set start backward one day\"\r\n                  onClick={() =>\r\n                    setStartTime((st) =>\r\n                      st\r\n                        ? moment(st).subtract(1, \"d\")\r\n                        : moment().subtract(1, \"d\")\r\n                    )\r\n                  }\r\n                >\r\n                  Day -\r\n                </ButtonSpaced>\r\n                <ButtonSpaced\r\n                  variant=\"contained\"\r\n                  disableRipple\r\n                  title=\"Set start forward one day\"\r\n                  onClick={() =>\r\n                    setStartTime((st) =>\r\n                      st ? moment(st).add(1, \"d\") : moment().add(1, \"d\")\r\n                    )\r\n                  }\r\n                >\r\n                  Day +\r\n                </ButtonSpaced>\r\n              </div>\r\n            </SettingsContainer>\r\n            <SettingsContainer>\r\n              <Typography variant=\"body1\">Tasks</Typography>\r\n              <TextField\r\n                helperText=\"Format: [minutes],[title] separated by new lines.\"\r\n                // placeholder=\"In the format [minutes],[title] and separated by new lines.\"\r\n                title=\"Format: [minutes],[title] separated by new lines.\"\r\n                rows={10}\r\n                multiline\r\n                margin=\"dense\"\r\n                size=\"small\"\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                inputProps={{\r\n                  style: {\r\n                    fontFamily: \"Roboto Mono\",\r\n                  },\r\n                }}\r\n                value={settings}\r\n                onChange={(e) => setSettings(e.target.value)}\r\n              />\r\n              <Button\r\n                variant=\"contained\"\r\n                disableRipple\r\n                title=\"Set\"\r\n                onClick={onSetTasks}\r\n              >\r\n                <DirectionsRunIcon />\r\n              </Button>\r\n            </SettingsContainer>\r\n          </Accordion>\r\n        </Box>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default TimerPage;\r\n"],"names":["_interopRequireDefault","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","_excluded","Box","options","arguments","length","undefined","defaultTheme","_options$defaultClass","defaultClassName","generateClassName","BoxRoot","shouldForwardProp","prop","styleFunctionSx","inProps","ref","theme","useTheme","_extendSxProp","extendSxProp","className","_extendSxProp$compone","component","other","as","createBox","ClassNameGenerator","Border","styled","_templateObject","_taggedTemplateLiteralLoose","Bar","_templateObject2","props","color","fill","Number","Typography","_templateObject3","NumberRight","_templateObject4","_templateObject5","_ref","cur","max","dispCur","dispMax","Math","shownCur","min","shownMax","React","title","palette","primary","main","variant","sumTasks","a","reduce","acc","e","time","TimerContainer","TaskContainer","SettingsContainer","ButtonSpaced","Button","endTime","totalDuration","totalHours","totalMinutes","totalSeconds","curDuration","GlobalContext","showError","showSuccess","_React$useState","startTime","setStartTime","_React$useState2","moment","curTime","setCurTime","_React$useState3","tasks","setTasks","_React$useState4","settings","setSettings","timer","setInterval","clearInterval","savedTasks","localStorage","getItem","savedSettings","savedStartTime","JSON","parse","setItem","format","Helmet","name","content","Container","maxWidth","gutterBottom","sx","display","flexDirection","justifyContent","add","map","i","key","LoadingBar","diff","slice","places","floor","pow","margin","Accordion","expand","parseInt","asHours","asMinutes","asSeconds","Select","size","value","hour","onChange","st","target","MenuProps","height","_toConsumableArray","Array","_","MenuItem","minute","second","marginRight","disableRipple","onClick","subtract","TextField","helperText","rows","multiline","fullWidth","inputProps","style","fontFamily","preventDefault","matches","trim","split","match","newTasks","filter","parseFloat","failedParse","join","stringify","DirectionsRunIcon"],"sourceRoot":""}