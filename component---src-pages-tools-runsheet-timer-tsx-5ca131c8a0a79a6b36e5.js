"use strict";(self.webpackChunkdustbringer_github_io=self.webpackChunkdustbringer_github_io||[]).push([[882],{89131:function(e,t,n){var r=n(74579);t.Z=void 0;var a=r(n(22511)),l=n(4404),i=(0,a.default)((0,l.jsx)("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"}),"DirectionsRun");t.Z=i},9316:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(86415),a=n(89241),l=n(7783),i=n(59288);var o=(0,n(36190).Z)("MuiBox",["root"]);const s=(0,l.Z)();var u=(0,r.Z)({themeId:i.Z,defaultTheme:s,defaultClassName:o.root,generateClassName:a.Z.generate})},86415:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(50451),a=n(20925),l=n(59364),i=n(79028),o=n(2162),s=n(5545),u=n(3375),m=n(87841),d=n(4404);const c=["className","component"];function p(e={}){const{themeId:t,defaultTheme:n,defaultClassName:p="MuiBox-root",generateClassName:h}=e,g=(0,o.ZP)("div",{shouldForwardProp:e=>"theme"!==e&&"sx"!==e&&"as"!==e})(s.Z);return l.forwardRef((function(e,l){const o=(0,m.Z)(n),s=(0,u.Z)(e),{className:f,component:Z="div"}=s,v=(0,a.Z)(s,c);return(0,d.jsx)(g,(0,r.Z)({as:Z,ref:l,className:(0,i.Z)(f,h?h(p):p),theme:t&&o[t]||o},v))}))}},72267:function(e,t,n){n.r(t),n.d(t,{Head:function(){return q},default:function(){return $}});var r,a,l,i,o,s=n(45956),u=n(72087),m=n(59364),d=n(10760),c=n(42926),p=n.n(c),h=n(9316),g=n(79504),f=n(75490),Z=n(8345),v=n(68148),x=n(23236),b=n(89131),E=n(61158),y=n(571),M=n(65997),w=n(29230);const k=(0,d.ZP)("div")(r||(r=(0,u.Z)(["\n  outline: 2px solid ",";\n  border-radius: 100px;\n  height: 1rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n"])),(e=>e.color||"darkgrey")),S=(0,d.ZP)("div")(a||(a=(0,u.Z)(["\n  background-color: ",";\n  width: ","%;\n  height: 1rem;\n  border-radius: ",";\n  display: flex;\n  align-items: center;\n  transition: all 1s linear;\n  overflow: hidden; // hides number inside when short\n"])),(e=>e.color||"skyblue"),(e=>e.fill||0),(e=>e.fill>=100?"10px":"10px 4px 4px 10px")),C=(0,d.ZP)(f.Z)(l||(l=(0,u.Z)(["\n  font-weight: bold;\n  margin-left: auto;\n  padding: 0 4px;\n"]))),P=(0,d.ZP)(f.Z)(i||(i=(0,u.Z)(["\n  font-weight: bold;\n  position: absolute;\n  right: 4px;\n  z-index: -1;\n"])));(0,d.ZP)(f.Z)(o||(o=(0,u.Z)(["\n  font-weight: bold;\n  position: absolute;\n  left: 4px;\n  z-index: -1;\n"])));var N,I,R,F=function(e){let{cur:t,max:n,dispCur:r,dispMax:a}=e;const l=(0,w.Z)();t=Math.max(t,0),r=Math.max(r,0);const i=void 0!==r&&void 0!==a?t<n?r:a:Math.min(t,n),o=a||n;return m.createElement(k,{title:i+"/"+o+" min"},m.createElement(S,{color:l.palette.primary.main,fill:t/n*100},m.createElement(C,{variant:"body2",color:"light"===l.palette.mode?"#F4F4F4":"black"},i)),m.createElement(P,{variant:"body2"},o))};const D=(0,d.ZP)("div")(N||(N=(0,u.Z)(["\n  position: relative;\n  background-color: ",";\n  height: 3px;\n  border-radius: 2px;\n  display: flex;\n  justify-content: start;\n  overflow: hidden;\n"])),(e=>e.color||"#EEE")),T=(0,d.ZP)("div")(I||(I=(0,u.Z)(["\n  background-color: ",";\n  width: ","%;\n  height: 3px;\n  border-radius: 2px 0px 0px 2px;\n  transition: all 1s linear;\n"])),(e=>e.color||"skyblue"),(e=>Math.min(e.fill||0,100))),z=(0,d.ZP)("div")(R||(R=(0,u.Z)(["\n  background-color: ",";\n  height: 3px;\n  width: 5px;\n"])),(e=>e.color||"white"));var H,Y,j,B,_=function(e){let{cur:t,max:n}=e;const r=(0,w.Z)();return t=Math.max(t,0),m.createElement(D,{color:"light"===r.palette.mode?"darkgrey":"grey"},m.createElement(T,{color:r.palette.primary.main,fill:t/n*100}),m.createElement(z,null))};const A=e=>e.reduce(((e,t)=>e+t.time),0),J=(0,d.ZP)("div")(H||(H=(0,u.Z)(["\n  outline: 1px solid grey;\n  border-radius: 3px;\n  padding: 15px;\n"]))),O=(0,d.ZP)("div")(Y||(Y=(0,u.Z)(["\n  margin: 10px 0;\n"]))),W=(0,d.ZP)("div")(j||(j=(0,u.Z)(["\n  margin: 0 0 10px;\n"]))),K=(0,d.ZP)(g.Z)(B||(B=(0,u.Z)(["\n  margin: 3px 3px;\n"])));var $=function(){const e=m.useContext(M.kn),{showError:t,showSuccess:n}=e||{showError:()=>{},showSuccess:()=>{}},[r,a]=m.useState(),[l,i]=m.useState(p()()),[o,u]=m.useState([]),[d,c]=m.useState("");return m.useEffect((()=>{const e=setInterval((()=>i(p()())),1e3);return()=>clearInterval(e)}),[]),m.useEffect((()=>{const e=localStorage.getItem("dustbringer-runsheet-timer-tasks"),t=localStorage.getItem("dustbringer-runsheet-timer-settings"),n=localStorage.getItem("dustbringer-runsheet-timer-start");e&&u(JSON.parse(e)),a(n?p()(n):p()()),t&&c(t)}),[]),m.useEffect((()=>{r&&localStorage.setItem("dustbringer-runsheet-timer-start",r.format())}),[r]),m.createElement(m.Fragment,null,m.createElement(y.Z,{maxWidth:"md"},m.createElement(f.Z,{variant:"h4"},"Runsheet Timer"),m.createElement(f.Z,{variant:"body1",gutterBottom:!0},"Keep track of a schedule."),r&&m.createElement(J,null,m.createElement(h.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},m.createElement(f.Z,{variant:"body1"},m.createElement("strong",null,"Start: "),r.format("HH:mm:ss, dddd, DD MMMM YYYY")),m.createElement(f.Z,{variant:"body1"},m.createElement("strong",null,"End: "),p()(r).add(A(o),"m").format("HH:mm:ss, dddd, DD MMMM YYYY"))),m.createElement(_,{cur:l.diff(p()(r),"seconds"),max:60*A(o)}),m.createElement("div",null,o.map(((e,t)=>{return m.createElement(O,{key:e.title+t},e.title,m.createElement(F,{cur:l.diff(p()(r).add(A(o.slice(0,t)),"m"),"seconds"),max:60*e.time,dispCur:l.diff(p()(r).add(A(o.slice(0,t)),"m"),"minutes"),dispMax:(n=e.time,a=2,(a=Math.floor(a))<=0?Math.floor(n):Math.floor(n*Math.pow(10,a))/Math.pow(10,a))}));var n,a})))),m.createElement(h.Z,{sx:{margin:"10px 0"}},m.createElement(E.Z,{title:"Settings",expand:!0},m.createElement(W,null," ",r&&m.createElement(f.Z,{variant:"body1",gutterBottom:!0},m.createElement("strong",null,"Time Elapsed: "),(()=>{const e=p()(r).add(A(o),"m"),t=p().duration(e.diff(r)),n=Math.floor(t.asHours()),a=Math.floor(t.asMinutes())%60,i=Math.floor(t.asSeconds())%60,s=p().duration(p().min(l,e).diff(r));return Math.trunc(s.asHours())+"h "+Math.trunc(s.asMinutes())%60+"m "+Math.trunc(s.asSeconds())%60+"s of "+n+"h "+a+"m "+i+"s"})()),m.createElement(f.Z,{variant:"body1"},"Set Start Time"),m.createElement("div",null,m.createElement(v.Z,{title:"Hours",size:"small",value:r?r.hour():0,onChange:e=>a((t=>t?p()(t).hour(Number(e.target.value)):p()().hour(Number(e.target.value)))),MenuProps:{sx:{height:"400px"}}},(0,s.Z)(Array(24)).map(((e,t)=>m.createElement(x.Z,{value:t,key:t},t<10?"0"+t:t))))," ",":"," ",m.createElement(v.Z,{title:"Minutes",size:"small",value:r?r.minute():0,onChange:e=>a((t=>t?p()(t).minute(Number(e.target.value)):p()().minute(Number(e.target.value)))),MenuProps:{sx:{height:"400px"}}},(0,s.Z)(Array(60)).map(((e,t)=>m.createElement(x.Z,{value:t,key:t},t<10?"0"+t:t))))," ",":"," ",m.createElement(v.Z,{title:"Seconds",size:"small",value:r?r.second():0,onChange:e=>a((t=>t?p()(t).second(Number(e.target.value)):p()().second(Number(e.target.value)))),MenuProps:{sx:{height:"400px"}},sx:{marginRight:"3px"}},(0,s.Z)(Array(60)).map(((e,t)=>m.createElement(x.Z,{value:t,key:t},t<10?"0"+t:t)))),m.createElement(K,{variant:"contained",disableRipple:!0,title:"Set start to now",onClick:()=>a(p()())},"Now"),m.createElement(K,{variant:"contained",disableRipple:!0,title:"Set start backward one day",onClick:()=>a((e=>e?p()(e).subtract(1,"d"):p()().subtract(1,"d")))},"Day -"),m.createElement(K,{variant:"contained",disableRipple:!0,title:"Set start forward one day",onClick:()=>a((e=>e?p()(e).add(1,"d"):p()().add(1,"d")))},"Day +"))),m.createElement(W,null,m.createElement(f.Z,{variant:"body1"},"Tasks"),m.createElement(Z.Z,{helperText:"Format: [minutes],[title] separated by new lines.",title:"Format: [minutes],[title] separated by new lines.",rows:10,multiline:!0,margin:"dense",size:"small",fullWidth:!0,variant:"outlined",inputProps:{style:{fontFamily:"Roboto Mono"}},value:d,onChange:e=>c(e.target.value)}),m.createElement(g.Z,{variant:"contained",disableRipple:!0,title:"Set",onClick:e=>{e.preventDefault();const n=d.trim().split(/\s*\n\s*/).map((e=>e.match(/^\s*(\d*\.\d+|\d+\.?)\s*,(.*)$/))),r=n.filter((e=>e)).map((e=>({title:e?e[2].trim():"",time:parseFloat(e?e[1]:"0")})));u(r);const a=n.map(((e,t)=>t)).filter((e=>null===n[e]));a.length>0&&t("Error: Invalid time in lines "+a.map((e=>e+1)).join(",")),localStorage.setItem("dustbringer-runsheet-timer-tasks",JSON.stringify(r)),localStorage.setItem("dustbringer-runsheet-timer-settings",d)}},m.createElement(b.Z,null)))))))};function q(){return m.createElement(m.Fragment,null,m.createElement("title",null,"Runsheet Timer | dustbringer.github.io"),m.createElement("meta",{name:"description",content:"Runsheet Timer"}))}}}]);
//# sourceMappingURL=component---src-pages-tools-runsheet-timer-tsx-5ca131c8a0a79a6b36e5.js.map