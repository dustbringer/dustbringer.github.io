---
slug: "/posts/2022-12-03-polya-enumeration"
title: How many ways can we place things in circle?
description: Exploration of counting using Polya's Enumeration Theorem.
author: dustbringer
date: 2022-12-03
tags:
    - combinatorics
    - group theory
---

# How many ways can we place things in circle?

In high-school mathematics you probably have come across the term *combinatorics*, and learnt about counting the number of ways you can arrange some objects in a particular fashion. To arrange $n$ (distinct) objects in a line, there are $n! = n(n-1) \dots 2 \times 1$ possible permutations of these objects. If there are repeated objects, we divide by the permutation of the identical objects. For example arranging the letters of $BALLOON$ in a line, the letters $L$ and $O$ both repeat twice, so there are $\frac{7!}{2!2!}$ permutations. When arranging $n$ (distinct) objects in a circle, we can rotate any arrangement and think of it as the same arrangement. So we arrange the items and divide by the number of different rotations to remove the overcounted arrangements, $n!/n = (n-1)!$.

What happens when we combine these ideas together, taking $n$ objects with some possibly identical and arranging them in a circle? For an easy example, say we want to arrange the letters $AABB$ in a circle. How many ways can this be done? It's easy to just write everything, and we find that there are only two possibilities (up to rotation):

<!-- Image generated using tikz, converted to SVG using pdf2svg, scaled up using inkscape -->
<!-- Rescaling in inkscape: https://superuser.com/questions/475851/how-can-i-scale-an-svg-via-command-line -->

![](../post_resources/2022-12-03-polya-enumeration/example-AABB.svg)
![](../post_resources/2022-12-03-polya-enumeration/example-ABAB.svg)

However if we try to combine the two calculations we did above the number of permutations is
$$
\frac{4!}{4 \times 2!2!} = \frac{3}{2} = 1.5,
$$
which not only isn't $2$ but isn't even a whole number! You can go through many different examples and try to find a nice formula for the number of permutations, but it's not exactly that simple! This where I got stuck while trying to untangle this problem in my first year of university.

It turns out there is a nice theorem that gives a general procedure to solve this, but it requires some background in group theory...


## Background
The following is a quick and brief proof-less introduction to the concepts we will need. The intention isn't for you to deeply understand groups and group actions but to get some intuition to help understand how the counting theorem works.

### Groups
**Definition.** A *group* is a set $G$ with a binary operation $*$, such that the following axioms hold.
- (Identity) There is an element $e \in G$ such that for any $a \in G$, $a * e = e * a = a$.
- (Associativity) For any three elements $a,b,c \in G$, $(a * b) * c = a * (b * c)$.
- (Inverse) For any element $a \in G$, there exists an element $b \in G$ for which $a * b = b * a = e$, we write $a^{-1}$ for this element.

We sometimes drop the $*$ if the operation is clear from the context.

**Example 1.** An easy example of a group is $\Z/n\Z = \{0,1,...,n-1\}$ where the operation is addition modulo $n$. This is the *cyclic group* $C_n$, which we think of generated by $1$, for example $\Z/4\Z = \{1,1+1,1+1+1,1+1+1+1\}$, where $1+1+1+1=0 \ (\op{mod}\ 4)$.

**Example 2.** The *symmetric group* on $n$ elements $S_n$ is a group where elements are the permutations of $1, 2, ..., n$. For two elements $a,b \in S_n$, $ab \in S_n$ is the permutation obtained by applying $b$ then applying $a$. For example the following table represents a permutation on the first $4$ integers, taking $1 \to 2 \to 3 \to 1$ and $4 \to 4$.

|        |     |     |     |     |
| ------ | --- | --- | --- | --- |
| Input  | 1   | 2   | 3   | 4   |
| Output | 2   | 3   | 1   | 4   |

A useful way to write this is with *cycle notation*. The above table corresponds to the element $(123)(4) \in S_4$, where $(123)$ and $(4)$ are *cycles*. In fact every permutation of $n$ elements can be written as a product of disjoint cycles (i.e. the numbers inside the cycles don't overlap). We often do not write cycles of length $1$ because they offer no new information. For convenience, we write the identity permutation $(1)(2)...(n)$ as $\op{id}$.

The counting theorem uses subgroups of $S_n$, which you can think of as smaller groups living inside $S_n$.



### Group Actions
**Definition.** Let $S$ be a set and $G$ a group. A *group action* of $G$ on $S$ is an operation $g \cdot s \in S$ for $g \in G$ and $s \in S$, satisfying the following properties.
- (Identity) If $e \in G$ is the identity element, then $e \cdot s = s$ for all $s \in S$.
- (Compatibility) For $g,h \in G$, $g \cdot (h \cdot s) = (gh) \cdot s$ for all $s \in S$.

**Example.** Let $G = S_4$ and let $S$ be the set tuples representing arrangements of the letters $a,b,c,d$ in a line (without repetition). An easy group action could be for $g \in S_4$ and $s \in S$, $g \cdot s$ is permuting entries in the tuple by $g$. For example if $g = (123)(4)$ and $s = (a,b,c,d)$ then $g \cdot s = (c,a,b,d)$, because $g$ take the element in position $1$ to position $2$, the element in position $2$ to position $3$, and so on.


**Definition.** Let $G$ be a group acting on a set $S$.
- Let $s \in S$. The *orbit* of $s$ is the set of every possible element in $S$ obtained from $G$ acting on $x$, that is
  $$
  G \cdot x = \{g \cdot x: g \in G\},
  $$
  which is sometimes written $\op{Orb}(x)$. The *stabilizer* of $s$ is the set of elements of $G$ that fix $s$, that is
  $$
  \op{Stab}(x) = \{g \in G : g \cdot s = s\}.
  $$
- Let $g \in G$. The *fixed set* of $g$ is the set of every element of $S$ that is fixed by $g$, that is
  $$
  S^g = \{s \in S: g \cdot s = s\},
  $$
  which is sometimes written $\op{Fix}(x)$.

The set of orbits is typically written as $S / G = \{\op{Orb}(s): s \in S\}$.

**Example.** Let $G = C_4 \subseteq S_4$ be the group generated by one $4$-cycle (cycle length $4$) in $S_4$. Think of $C_4$ as generated by $(1234)$, whose elements are
| Element    | Disjoint cycles |
| ---------- | --------------- |
| $(1234)$   | $(1234)$        |
| $(1234)^2$ | $(13)(24)$      |
| $(1234)^3$ | $(1432)$        |
| $(1234)^4$ | $(1)(2)(3)(4) = \op{id}$  |

Let $S$ be the set $4$-tuples representing arrangements of the letters $a,b,c,d$ in a line (with repetition). Let $C_4$ act on $S$ as in the previous example. Let $s = (a,b,c,c) \in S$ then the orbit of $s$ is
$$
G \cdot s = \{(a,b,c,c), (c,a,b,c), (c,c,a,b), (b,c,c,a)\}.
$$
The stabilizer of $s$ is
$$
\op{Stab}(s) = \{\op{id}, (34)\}.
$$
Let $g = (123) \in C_4$, then the fixed set of $g$ is
$$
\begin{aligned}
S^g &= \{(a,a,a,a), (a,a,a,b), ..., (d,d,d,c), (d,d,d,d)\} \\
&= \{(x,x,x,y): x,y \in \{a,b,c,d\}\}.
\end{aligned}
$$

**Proposition.** Let $G$ be a group acting on a set $S$. The orbits of $s \in S$ partition $S$, that is
$$
\bigsqcup_{s \in S} \op{Orb}(s) = S.
$$

**Proof.** Clearly $S$ is a union of its orbits, because $s \in \op{Orb}(s)$. The disjointness follows from the invertibility of elements in $G$.


## Burnside's Lemma
This lemma (not actually by Burnside) tells you how many orbits of a group action there are.

**Lemma. (Burnside's Lemma)** Let $G$ be a (finite) group acting on a set $S$, then
$$
|S/G| = \frac{1}{|G|} \sum_{g \in G} |S^g|.
$$

**Proof.** We will skip the proof. See [Wikipedia](https://en.wikipedia.org/wiki/Burnside%27s_lemma#Proof) if you are interested.

This lemma by itself can already be used to solve our problem. Remember that we wanted to arrange the letters $AABB$ in a circle. We can take $G = C_4$ to as our group action, so that each arrangement and all its rotations can be summed up as one orbit. We wanted to know how many of these "different" arrangements (or orbits) there are, which Burnside's lemma tells us. If we let $S$ be all the tuples representing arrangements of $AABB$ in a line, then the number of orbits under $C_4$ is the number of "different" arrangements of $AABB$ in a circle.

Listing out all the arrangements of the letters of $AABB$, we get
$$
S = \{AABB, ABAB, ABBA, BABA, BAAB, BBAA\}.
$$
Since $C_4$ is generated by $(1234)$, its elements are
$$
C_4 = \{\op{id}, (1234), (13)(24), (1432)\}.
$$

For an arrangement to be fixed by a cycle, the letters at each position changed by the cycle must be the same. Then we can see that
- $S^{\op{id}} = S$,
- $S^{(1234)} = \varnothing$,
- $S^{(13)(24)} = \{ABAB, BABA\}$ (because an arrangment is fixed by $(13)(24)$ only when the letter at positions $1,3$ are equal, and the letters at positions $2,4$ are equal),
- $S^{(1432)} = \varnothing$.

So the possible number of arrangements is
$$
\begin{aligned}
  |S/C_4| &= \frac{1}{|C_4|} (|S^{\op{id}}| + |S^{(1234)}| + |S^{(13)(24)}| + |S^{(1432)}|) \\
  &= \frac{1}{4} (6 + 0 + 2 + 0) \\
  &= 2.
\end{aligned}
$$
This is exactly what we wanted! In fact Burnside's lemma is enough for any version of our problem, but we continue further to explore a theorem by Pólya that generalises this.

Before moving on, note that if we let the set $S$ be the set of all 4-element arrangements of the letters $A,B$ (with replacement), then Burnside's lemma tells us the number of ways to arrange $A,B$ on a circle (with replacement). Particularly, orbits of the arrangements of $AABB$ is a subset of the set of orbits $S/C_4$. Pólya's theorem builds on this by describing the number of circle arrangements of every 4-letter combination of $A$'s and $B$'s inside $S/C_4$.

## Pólya's Enumeration Theorem


<!-- Talk about what happens with prime number of objects -->

<!-- Extra stuff such as changing the weights, being able to flip over the circle, changing to a different subgroup of S_n -->

## Additional Material
